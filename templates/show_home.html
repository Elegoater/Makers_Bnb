<!DOCTYPE html>
<html lang="en">
<head>
    <title>MakersBnB - add a home!</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='calendar.css') }}">
</head>
<body>
    <div class="topnav">
        <div class="logo">
            <img src="/static/MakersBnB_logo.png" alt="MakersBnB Logo"> MakersBnB
        </div>
        <div class="menu">
            <a href="/index">All Homes</a>
            <a href="/all_requests">Requests</a>
            <a href="/logout">Logout</a>
        </div>
    </div>
    <div class="title_container">
        <h1>{{home.title}}</h1>
    </div>
    <div class="description_container">
        <p>Description: {{home.description}}</p>
        <p>Location: {{home.location}}</p>
        <p>Price per night: {{home.price_per_night}}</p>
        <p>Owner: {{home_owner}}</p>
        <h1>Booked dates:</h1>
        {% for date in calendar_dates %}
            {% if date[1] == True %}
            <div class="booked_date">
                {{date[0]}}
            </div>
            {% endif %}
        {% endfor %}
    <div class="check_in_container">
        <h1>Select your dates</h1>
        <form action="/book" method="POST">
            <label for="start-date">Check-in:</label>
            <input type="date" id="start-date" name="start_date" required>
            <label for="end-date">Check-out:</label>
            <input type="date" id="end-date" name="end_date" required>
            <input type="hidden" name="home_id" value="{{home.id}}">
            <button type="submit" class="button">Reserve Home</button>
        </form>
    </div>
    <script>
        document.getElementById('booking-form').addEventListener('submit', function(event) {
            const startDateInput = document.getElementById('start-date');
            const endDateInput = document.getElementById('end-date');
    
            // Convert to YYYY/MM/DD format
            const formatToYYYYMMDD = (dateStr) => {
                const [year, month, day] = dateStr.split('-');
                return `${year}/${month}/${day}`;
            };
    
            // Update input values to the new format
            startDateInput.value = formatToYYYYMMDD(startDateInput.value);
            endDateInput.value = formatToYYYYMMDD(endDateInput.value);
        });
    </script>
        <h1>{{calendar_month}}</h1>
        <h2>{{calendar_dates[10][0].year}}</h2>
        <div class="calendar_buttons">
            <div class="calendar_headers">Mon</div>
            <div class="calendar_headers">Tue</div>
            <div class="calendar_headers">Wed</div>
            <div class="calendar_headers">Thu</div>
            <div class="calendar_headers">Fri</div>
            <div class="calendar_headers">Sat</div>
            <div class="calendar_headers">Sun</div>
            {% for date in calendar_dates %}
                {% if date[1] == True %}
                        <button type="button" name="{{date[0].day}}" value="{{date[0]}}" class="button3">{{date[0].day}}</button>
                {% elif date[0].month == calendar_dates[10][0].month %}
                    <form action="" method="POST">
                        <button type="submit" name="{{date[0].day}}" value="{{date[0]}}" class="button2">{{date[0].day}}</button>
                    </form>
                {% else %}
                    <form action="" method="POST">
                        <button type="submit" name="{{date[0].day}}" value="{{date[0]}}" class="button4">{{date[0].day}}</button>
                    </form>
                {% endif %}
            {% endfor %}
        </div>
</body>
</html>